(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"3h2s":function(t,e,i){"use strict";i.r(e),i.d(e,"UtilisateursModule",(function(){return Pe}));var r=i("ofXK"),c=i("fXoL");let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Pb({type:t,selectors:[["app-show-utilisateur-externe"]],decls:2,vars:0,template:function(t,e){1&t&&(c.bc(0,"p"),c.Rc(1,"show-utilisateur-externe works!"),c.ac())},styles:[""]}),t})();var n=i("3Pt+"),s=i("PSD3"),a=i.n(s),l=i("tyNb"),u=i("5eHb"),d=i("/AG3"),m=i("1kSV"),f=i("lGQG"),b=i("bE2y"),h=i("OzZK"),p=i("RwU8"),v=i("C2AL");function g(t,e){if(1&t){const t=c.cc();c.bc(0,"div",36),c.bc(1,"button",37),c.mc("click",(function(){return(0,e.dismiss)("Cross click")})),c.bc(2,"span",38),c.Rc(3,"\xd7"),c.ac(),c.ac(),c.ac(),c.bc(4,"div",39),c.bc(5,"form",40),c.mc("ngSubmit",(function(){return c.Gc(t),c.pc().onSubmitcertif()})),c.bc(6,"div",41),c.bc(7,"p",42),c.bc(8,"b"),c.Rc(9,"Certification: "),c.ac(),c.ac(),c.bc(10,"input",43,44),c.mc("change",(function(){c.Gc(t);const e=c.Fc(11);return c.pc().selectCertif(e.files)})),c.ac(),c.ac(),c.bc(12,"div",45),c.bc(13,"button",46),c.Rc(14,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.pc();c.Hb(13),c.wc("nzLoading",t.isLoadingCertification)}}function C(t,e){if(1&t){const t=c.cc();c.bc(0,"div",36),c.bc(1,"button",37),c.mc("click",(function(){return(0,e.dismiss)("Cross click")})),c.bc(2,"span",38),c.Rc(3,"\xd7"),c.ac(),c.ac(),c.ac(),c.bc(4,"div",39),c.bc(5,"form",40),c.mc("ngSubmit",(function(){return c.Gc(t),c.pc().onSubmitcv()})),c.bc(6,"div",41),c.bc(7,"p",42),c.bc(8,"b"),c.Rc(9,"Cv: "),c.ac(),c.ac(),c.bc(10,"input",47,48),c.mc("change",(function(){c.Gc(t);const e=c.Fc(11);return c.pc().selectcv(e.files)})),c.ac(),c.ac(),c.bc(12,"div",45),c.bc(13,"button",46),c.Rc(14,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.pc();c.Hb(13),c.wc("nzLoading",t.isLoadingCv)}}function w(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est obligatoire"),c.ac())}function L(t,e){if(1&t&&(c.bc(0,"div",49),c.Pc(1,w,2,0,"div",27),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.nom.errors.required)}}function R(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est obligatoire"),c.ac())}function x(t,e){if(1&t&&(c.bc(0,"div",49),c.Pc(1,R,2,0,"div",27),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.prenom.errors.required)}}function F(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est obligatoire"),c.ac())}function y(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide"),c.ac())}function O(t,e){if(1&t&&(c.bc(0,"div",49),c.Pc(1,F,2,0,"div",27),c.Pc(2,y,2,0,"div",27),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.email.errors.required),c.Hb(1),c.wc("ngIf",t.f.email.errors.email)}}function H(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"T\xe9l\xe9phone est obligatoire"),c.ac())}function S(t,e){if(1&t&&(c.bc(0,"div",49),c.Pc(1,H,2,0,"div",27),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.tele.errors.required)}}function P(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est obligatoire"),c.ac())}function I(t,e){if(1&t&&(c.bc(0,"div",49),c.Pc(1,P,2,0,"div",27),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.fonction.errors.required)}}function z(t,e){if(1&t){const t=c.cc();c.bc(0,"div",51),c.bc(1,"p"),c.Rc(2),c.ac(),c.bc(3,"button",52),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc(2).deleteCertif(i.nom_certif,i.email)})),c.Wb(4,"i",53),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Hb(2),c.Tc(" ",null==t?null:t.nom_certif," ")}}function A(t,e){if(1&t){const t=c.cc();c.bc(0,"div"),c.bc(1,"div",50),c.bc(2,"p",29),c.bc(3,"b"),c.Rc(4,"Certification: "),c.ac(),c.ac(),c.bc(5,"button",30),c.mc("click",(function(){c.Gc(t);const e=c.pc(),i=c.Fc(4);return e.open(i)})),c.Wb(6,"i",31),c.ac(),c.ac(),c.Pc(7,z,5,1,"div",32),c.ac()}if(2&t){const t=c.pc();c.Hb(7),c.wc("ngForOf",t.allCertif)}}function k(t,e){if(1&t){const t=c.cc();c.bc(0,"div",51),c.bc(1,"p"),c.Rc(2),c.ac(),c.bc(3,"button",52),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc().deletedCv(i.nom_cv,i.email)})),c.Wb(4,"i",54),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Hb(2),c.Tc(" ",null==t?null:t.nom_cv," ")}}const E=function(t){return{"is-invalid":t}};let D=(()=>{class t{constructor(t,e,i,r,c,o,n,s){this.formBuilder=t,this.router=e,this.toastr=i,this.utilisateurService=r,this.modalService=o,this.route=n,this.authService=s,this.submitted=!1,this.file=[],this.cv=[],this.isLoading=!1,this.isLoadingCertification=!1,this.isLoadingCv=!1,c.backdrop="static",c.keyboard=!1}open(t){this.modalService.open(t)}openCV(t){this.modalService.open(t)}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.authService.getcurrentuser().subscribe(t=>{this.idAdmin=t.id}),this.fetchCertifFormateur(this.id),this.fetchCvFormateur(this.id),this.utilisateurService.getUtilisateurById(this.id).subscribe(t=>{this.Result=t.result[0],this.Result.showDiv="Instructeur"===this.Result.role,this.editFormateurForm.patchValue({nom:this.Result.nom,prenom:this.Result.prenom,email:this.Result.email,tele:this.Result.tele,fonction:this.Result.fonction,role:this.Result.role})}),this.editFormateurForm=this.formBuilder.group({nom:["",[n.u.required]],prenom:["",[n.u.required]],email:["",[n.u.required,n.u.email]],tele:["",[n.u.required]],fonction:["",[n.u.required]],role:["",[n.u.required]]})}get f(){return this.editFormateurForm.controls}onSubmit(){this.submitted=!0,this.editFormateurForm.invalid||(this.isLoading=!0,this.utilisateurService.editUtilisateur(this.id,{nom:this.editFormateurForm.value.nom,prenom:this.editFormateurForm.value.prenom,email:this.editFormateurForm.value.email,tele:this.editFormateurForm.value.tele,fonction:this.editFormateurForm.value.fonction,role:this.editFormateurForm.value.role,roleAdmin:"Pas de r\xf4le",examinateur:"non"}).subscribe(t=>{t.success?(this.toastr.success("Succ\xe8s"),this.router.navigate(["/admin/utilisateurs/list-utilisateurs-externe"])):(this.toastr.error("Erreur",t.error),this.isLoading=!1)}))}fetchCertifFormateur(t){this.utilisateurService.getAllFormateurCertifById(t).subscribe(t=>{this.allCertif=t.result})}fetchCvFormateur(t){this.utilisateurService.getAllFormateurCvById(t).subscribe(t=>{this.allCv=t.result})}deleteCertif(t,e){a.a.fire({title:"\xcates vous s\xfbr de vouloir supprimer cette certification ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(i=>{i.isConfirmed&&this.utilisateurService.deleteCertifById(t,e).subscribe(t=>{t.success?(this.fetchCertifFormateur(this.id),this.toastr.success("Succ\xe8s")):this.toastr.error("Erreur",t)})})}deletedCv(t,e){a.a.fire({title:"\xcates vous s\xfbr de vouloir supprimer ce cv ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(i=>{i.isConfirmed&&this.utilisateurService.deleteCvById(t,e).subscribe(t=>{t.success?(this.fetchCvFormateur(this.id),this.toastr.success("Succ\xe8s")):this.toastr.error("Erreur",t)})})}onSubmitcertif(){if(this.file.length>0){this.isLoadingCertification=!0,this.modalService.dismissAll();const t=this.Result.email;let e=1;this.file.forEach((i,r,c)=>{const o=new FormData;o.append("file",i),this.utilisateurService.saveCertifUtilisateur(t,this.idAdmin,o).subscribe(t=>{t.success?1===e&&(this.toastr.success("Succ\xe8s"),e=2):(this.toastr.error("Erreur",t.error),this.isLoadingCertification=!1),r===c.length-1&&this.fetchCertifFormateur(this.id)})})}this.file=[]}onSubmitcv(){if(this.cv.length>0){this.isLoadingCv=!0,this.modalService.dismissAll();const t=this.Result.email;let e=1;this.cv.forEach((i,r,c)=>{const o=new FormData;o.append("file",i),this.utilisateurService.saveCvUtilisateur(t,this.idAdmin,o).subscribe(t=>{t.success?1===e&&(this.toastr.success("Succ\xe8s"),e=2):(this.toastr.error("Erreur",t.error),this.isLoadingCv=!1),r===c.length-1&&this.fetchCvFormateur(this.id)})})}this.cv=[]}selectCertif(t){if(this.file=[],t){const e=t;for(let t=0;t<e.length;t++)this.file.push(e[t])}}selectcv(t){if(this.cv=[],t){const e=t;for(let t=0;t<e.length;t++)this.cv.push(e[t])}}changeStatut(t){t&&this.editFormateurForm.value.role&&(this.Result.showDiv="Instructeur"===this.editFormateurForm.value.role)}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(n.e),c.Vb(l.c),c.Vb(u.b),c.Vb(d.a),c.Vb(m.c),c.Vb(m.b),c.Vb(l.a),c.Vb(f.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-edit-utilisateur-externe"]],decls:58,vars:24,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],["content",""],["contentCV",""],[1,"text-right","mt-5",2,"padding-top","50px !important"],["routerLink","/admin/utilisateurs/list-utilisateurs-externe",1,"btn","btn-success","mr-2"],[1,"fas","fa-arrow-alt-circle-left"],[1,"row","mb-2"],[1,"col-sm-12","text-center","mb-4"],[1,"edit-title"],[1,"col-12","col-md-6","mx-auto"],[3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["type","text","formControlName","nom","placeholder","Pr\xe9nom",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","prenom","placeholder","Nom",1,"form-control",3,"ngClass"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","formControlName","email","placeholder","Email",1,"form-control",3,"ngClass"],[1,"fas","fa-phone"],["type","number","formControlName","tele","placeholder","T\xe9l\xe9phone",1,"form-control",3,"ngClass"],["type","text","formControlName","fonction","placeholder","Fonction",1,"form-control",3,"ngClass"],["formControlName","role",3,"ngModelChange"],["nz-radio","","nzValue","Instructeur"],["nz-radio","","nzValue","Consultant"],["nz-radio","","nzValue","Freelance"],[4,"ngIf"],[1,"my-2","d-flex","justify-content-between"],[1,"text-muted","text-sm"],["type","button",1,"btn","btn-info","btn-sm","ml-2",3,"click"],[1,"fas","fa-plus"],["class"," mt-3 d-flex justify-content-between",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","my-4","text-center"],["type","submit","nz-button","","nzType","primary","nzBlock","",3,"nzLoading"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"text-sm"],["type","file","name","file","multiple","multiple",3,"change"],["file",""],[1,"modal-footer"],["type","submit","nz-button","","nzType","primary",3,"nzLoading"],["type","file","name","cv","multiple","multiple",3,"change"],["cv",""],[1,"invalid-feedback"],[1,"d-flex","justify-content-between"],[1,"mt-3","d-flex","justify-content-between"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[1,"fas","fa-trash-alt",2,"cursor","pointer"]],template:function(t,e){if(1&t){const t=c.cc();c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.Pc(3,g,15,1,"ng-template",null,3,c.Qc),c.Pc(5,C,15,1,"ng-template",null,4,c.Qc),c.bc(7,"div",5),c.bc(8,"button",6),c.Wb(9,"i",7),c.Rc(10," Retour "),c.ac(),c.ac(),c.bc(11,"div",8),c.bc(12,"div",9),c.bc(13,"h1",10),c.Rc(14," Modifier un utilisateur"),c.ac(),c.ac(),c.bc(15,"div",11),c.bc(16,"form",12),c.mc("ngSubmit",(function(){return e.onSubmit()})),c.bc(17,"div",13),c.Wb(18,"input",14),c.Pc(19,L,2,1,"div",15),c.ac(),c.bc(20,"div",13),c.Wb(21,"input",16),c.Pc(22,x,2,1,"div",15),c.ac(),c.bc(23,"div",13),c.bc(24,"div",17),c.bc(25,"div",18),c.bc(26,"span"),c.Rc(27,"@"),c.ac(),c.ac(),c.ac(),c.Wb(28,"input",19),c.Pc(29,O,3,2,"div",15),c.ac(),c.bc(30,"div",13),c.bc(31,"div",17),c.bc(32,"div",18),c.Wb(33,"span",20),c.ac(),c.ac(),c.Wb(34,"input",21),c.Pc(35,S,2,1,"div",15),c.ac(),c.bc(36,"div",13),c.Wb(37,"input",22),c.Pc(38,I,2,1,"div",15),c.ac(),c.bc(39,"nz-radio-group",23),c.mc("ngModelChange",(function(t){return e.changeStatut(t)})),c.bc(40,"label",24),c.Rc(41,"Instructeur"),c.ac(),c.bc(42,"label",25),c.Rc(43,"Consultant"),c.ac(),c.bc(44,"label",26),c.Rc(45,"Freelance"),c.ac(),c.ac(),c.Pc(46,A,8,1,"div",27),c.bc(47,"div",28),c.bc(48,"p",29),c.bc(49,"b"),c.Rc(50,"CV: "),c.ac(),c.ac(),c.bc(51,"button",30),c.mc("click",(function(){c.Gc(t);const i=c.Fc(6);return e.openCV(i)})),c.Wb(52,"i",31),c.ac(),c.ac(),c.Pc(53,k,5,1,"div",32),c.bc(54,"div",33),c.bc(55,"div",34),c.bc(56,"button",35),c.Rc(57,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()}2&t&&(c.Hb(16),c.wc("formGroup",e.editFormateurForm),c.Hb(2),c.wc("ngClass",c.Bc(14,E,e.submitted&&e.f.nom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.nom.errors),c.Hb(2),c.wc("ngClass",c.Bc(16,E,e.submitted&&e.f.prenom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.prenom.errors),c.Hb(6),c.wc("ngClass",c.Bc(18,E,e.submitted&&e.f.email.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.email.errors),c.Hb(5),c.wc("ngClass",c.Bc(20,E,e.submitted&&e.f.tele.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.tele.errors),c.Hb(2),c.wc("ngClass",c.Bc(22,E,e.submitted&&e.f.fonction.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.fonction.errors),c.Hb(8),c.wc("ngIf",null==e.Result?null:e.Result.showDiv),c.Hb(7),c.wc("ngForOf",e.allCv),c.Hb(3),c.wc("nzLoading",e.isLoading))},directives:[l.d,n.w,n.n,n.h,n.d,n.m,n.g,r.l,r.n,n.r,b.b,b.a,r.m,h.a,p.a,v.a,n.o],styles:[""]}),t})();var B=i("mrSG");function V(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est obligatoire"),c.ac())}function M(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est invalide"),c.ac())}function N(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est invalide"),c.ac())}function G(t,e){if(1&t&&(c.bc(0,"div",32),c.Pc(1,V,2,0,"div",33),c.Pc(2,M,2,0,"div",33),c.Pc(3,N,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.nom.errors.required),c.Hb(1),c.wc("ngIf",t.f.nom.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.nom.errors.trimError2)}}function W(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est obligatoire"),c.ac())}function U(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est invalide"),c.ac())}function T(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est invalide"),c.ac())}function q(t,e){if(1&t&&(c.bc(0,"div",32),c.Pc(1,W,2,0,"div",33),c.Pc(2,U,2,0,"div",33),c.Pc(3,T,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.prenom.errors.required),c.Hb(1),c.wc("ngIf",t.f.prenom.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.prenom.errors.trimError2)}}function _(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est obligatoire"),c.ac())}function j(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide"),c.ac())}function $(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide<"),c.ac())}function X(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide<"),c.ac())}function Q(t,e){if(1&t&&(c.bc(0,"div",32),c.Pc(1,_,2,0,"div",33),c.Pc(2,j,2,0,"div",33),c.Pc(3,$,2,0,"div",33),c.Pc(4,X,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.email.errors.required),c.Hb(1),c.wc("ngIf",t.f.email.errors.email),c.Hb(1),c.wc("ngIf",t.f.email.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.email.errors.trimError2)}}function Z(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"T\xe9l\xe9phone est obligatoire"),c.ac())}function J(t,e){if(1&t&&(c.bc(0,"div",32),c.Pc(1,Z,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.tele.errors.required)}}function K(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est obligatoire"),c.ac())}function Y(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est invalide"),c.ac())}function tt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est invalide"),c.ac())}function et(t,e){if(1&t&&(c.bc(0,"div",32),c.Pc(1,K,2,0,"div",33),c.Pc(2,Y,2,0,"div",33),c.Pc(3,tt,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.fonction.errors.required),c.Hb(1),c.wc("ngIf",t.f.fonction.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.fonction.errors.trimError2)}}function it(t,e){if(1&t){const t=c.cc();c.bc(0,"div",21),c.bc(1,"label",34),c.Rc(2,"Certification"),c.ac(),c.Wb(3,"br"),c.bc(4,"input",35,36),c.mc("change",(function(){c.Gc(t);const e=c.Fc(5);return c.pc().selectCertif(e.files)})),c.ac(),c.ac()}}const rt=function(t){return{"is-invalid":t}};let ct=(()=>{class t{constructor(t,e,i,r,c){this.formBuilder=t,this.router=e,this.toastr=i,this.utilisateurService=r,this.authService=c,this.submitted=!1,this.file=[],this.cv=[],this.isLoading=!1,this.trimValidator=t=>t.value.startsWith(" ")?{trimError:{value:"control has leading whitespace"}}:t.value.endsWith(" ")?{trimError2:{value:"control has trailing whitespace"}}:null}ngOnInit(){this.statut="Instructeur",this.authService.getcurrentuser().subscribe(t=>{this.id=t.id}),this.FormateurForm=this.formBuilder.group({nom:["",[n.u.required,this.trimValidator]],prenom:["",[n.u.required,this.trimValidator]],email:["",[n.u.required,n.u.email,this.trimValidator]],tele:["",[n.u.required]],fonction:["",[n.u.required,this.trimValidator]],role:["Instructeur",[n.u.required]]})}get f(){return this.FormateurForm.controls}onSubmit(){if(this.submitted=!0,this.FormateurForm.invalid)return;this.isLoading=!0;const t={nom:this.FormateurForm.value.nom,prenom:this.FormateurForm.value.prenom,email:this.FormateurForm.value.email,tele:this.FormateurForm.value.tele,fonction:this.FormateurForm.value.fonction,role:this.FormateurForm.value.role,roleAdmin:"Pas de r\xf4le",examinateur:"non",statutUtilisateur:"externe"};this.utilisateurService.saveUtilisateur(t).subscribe(e=>Object(B.b)(this,void 0,void 0,(function*(){e.success?(this.file&&(yield this.file.forEach(e=>{const i=new FormData;i.append("file",e),this.utilisateurService.saveCertifUtilisateur(t.email,this.id,i).subscribe(t=>{t.success||(this.toastr.error("Erreur",t.error),this.isLoading=!1)})})),this.cv&&this.cv.forEach(e=>{const i=new FormData;i.append("file",e),this.utilisateurService.saveCvUtilisateur(t.email,this.id,i).subscribe(t=>{t.success||(this.toastr.error("Erreur",t.error),this.isLoading=!1)})}),this.toastr.success("Succ\xe8s"),this.router.navigate(["/admin/utilisateurs/list-utilisateurs-externe"])):(this.toastr.error("Erreur",e.error),this.isLoading=!1)})))}selectCertif(t){if(t){const e=t;for(let t=0;t<e.length;t++)this.file.push(e[t])}}selectcv(t){if(t){const e=t;for(let t=0;t<e.length;t++)this.cv.push(e[t])}}changeStatut(t){t&&(this.statut=this.FormateurForm.value.role,"Consultant"!==this.FormateurForm.value.role&&"Freelance"!==this.FormateurForm.value.role||(this.file=[]))}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(n.e),c.Vb(l.c),c.Vb(u.b),c.Vb(d.a),c.Vb(f.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-add-utilisateur-externe"]],decls:54,vars:23,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],[1,"text-right","mt-5",2,"padding-top","50px !important"],["routerLink","/admin/utilisateurs/list-utilisateurs-externe",1,"btn","btn-success","mr-2"],[1,"fas","fa-arrow-alt-circle-left"],[1,"row","mb-2"],[1,"col-sm-12","text-center","mb-4"],[1,"add-title"],[1,"col-12","col-md-6","mx-auto"],[3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["type","text","formControlName","nom","placeholder","Pr\xe9nom",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","prenom","placeholder","Nom",1,"form-control",3,"ngClass"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","formControlName","email","placeholder","Email",1,"form-control",3,"ngClass"],[1,"fas","fa-phone"],["type","number","formControlName","tele","placeholder","T\xe9l\xe9phone",1,"form-control",3,"ngClass"],["type","text","formControlName","fonction","placeholder","Fonction",1,"form-control",3,"ngClass"],[1,"mb-3"],["formControlName","role",3,"ngModelChange"],["nz-radio","","nzValue","Instructeur"],["nz-radio","","nzValue","Consultant"],["nz-radio","","nzValue","Freelance"],["class"," mb-3",4,"ngIf"],["type","file","name","cv","multiple","multiple",3,"change"],["cv",""],[1,"row"],[1,"col-12","mb-4","text-center"],["type","submit","nz-button","","nzType","primary","nzBlock","",3,"nzLoading"],[1,"invalid-feedback"],[4,"ngIf"],["for","exampleFormControlFile1"],["type","file","name","file","multiple","multiple",3,"change"],["file",""]],template:function(t,e){if(1&t){const t=c.cc();c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"button",4),c.Wb(5,"i",5),c.Rc(6," Retour "),c.ac(),c.ac(),c.bc(7,"div",6),c.bc(8,"div",7),c.bc(9,"h1",8),c.Rc(10,"Ajouter un utilisateur"),c.ac(),c.ac(),c.bc(11,"div",9),c.bc(12,"form",10),c.mc("ngSubmit",(function(){return e.onSubmit()})),c.bc(13,"div",11),c.Wb(14,"input",12),c.Pc(15,G,4,3,"div",13),c.ac(),c.bc(16,"div",11),c.Wb(17,"input",14),c.Pc(18,q,4,3,"div",13),c.ac(),c.bc(19,"div",11),c.bc(20,"div",15),c.bc(21,"div",16),c.bc(22,"span"),c.Rc(23,"@"),c.ac(),c.ac(),c.ac(),c.Wb(24,"input",17),c.Pc(25,Q,5,4,"div",13),c.ac(),c.bc(26,"div",11),c.bc(27,"div",15),c.bc(28,"div",16),c.Wb(29,"span",18),c.ac(),c.ac(),c.Wb(30,"input",19),c.Pc(31,J,2,1,"div",13),c.ac(),c.bc(32,"div",11),c.Wb(33,"input",20),c.Pc(34,et,4,3,"div",13),c.ac(),c.bc(35,"div",21),c.bc(36,"nz-radio-group",22),c.mc("ngModelChange",(function(t){return e.changeStatut(t)})),c.bc(37,"label",23),c.Rc(38,"Instructeur"),c.ac(),c.bc(39,"label",24),c.Rc(40,"Consultant"),c.ac(),c.bc(41,"label",25),c.Rc(42,"Freelance"),c.ac(),c.ac(),c.ac(),c.Pc(43,it,6,0,"div",26),c.bc(44,"div",21),c.bc(45,"label"),c.Rc(46,"CV"),c.ac(),c.Wb(47,"br"),c.bc(48,"input",27,28),c.mc("change",(function(){c.Gc(t);const i=c.Fc(49);return e.selectcv(i.files)})),c.ac(),c.ac(),c.bc(50,"div",29),c.bc(51,"div",30),c.bc(52,"button",31),c.Rc(53,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()}2&t&&(c.Hb(12),c.wc("formGroup",e.FormateurForm),c.Hb(2),c.wc("ngClass",c.Bc(13,rt,e.submitted&&e.f.nom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.nom.errors),c.Hb(2),c.wc("ngClass",c.Bc(15,rt,e.submitted&&e.f.prenom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.prenom.errors),c.Hb(6),c.wc("ngClass",c.Bc(17,rt,e.submitted&&e.f.email.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.email.errors),c.Hb(5),c.wc("ngClass",c.Bc(19,rt,e.submitted&&e.f.tele.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.tele.errors),c.Hb(2),c.wc("ngClass",c.Bc(21,rt,e.submitted&&e.f.fonction.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.fonction.errors),c.Hb(9),c.wc("ngIf","Instructeur"===e.statut),c.Hb(9),c.wc("nzLoading",e.isLoading))},directives:[l.d,n.w,n.n,n.h,n.d,n.m,n.g,r.l,r.n,n.r,b.b,b.a,h.a,p.a,v.a],styles:[""]}),t})();var ot=i("la+k"),nt=i("VvmD"),st=i("XUh5"),at=i("bsYF"),lt=i("OtHt"),ut=i("rMZv"),dt=i("cZdB");const mt=function(t){return["/admin/utilisateurs/show-utilisateurs-actif",t]},ft=function(t){return["/admin/utilisateurs/edit-utilisateurs-externe",t]};function bt(t,e){if(1&t){const t=c.cc();c.bc(0,"tr"),c.bc(1,"td"),c.Rc(2),c.ac(),c.bc(3,"td"),c.Rc(4),c.ac(),c.bc(5,"td"),c.Rc(6),c.ac(),c.bc(7,"td"),c.Rc(8),c.ac(),c.bc(9,"td"),c.Rc(10),c.ac(),c.bc(11,"td"),c.Rc(12),c.ac(),c.bc(13,"td"),c.Rc(14),c.ac(),c.bc(15,"td"),c.bc(16,"button",20),c.Wb(17,"i",21),c.ac(),c.bc(18,"button",22),c.Wb(19,"i",23),c.ac(),c.bc(20,"button",24),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc(2).deleteUtilisateur(i.id)})),c.Wb(21,"i",25),c.ac(),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Hb(2),c.Sc(t.nom),c.Hb(2),c.Sc(t.prenom),c.Hb(2),c.Sc(t.email),c.Hb(2),c.Sc(t.tele),c.Hb(2),c.Sc(t.fonction),c.Hb(2),c.Sc(t.role),c.Hb(2),c.Sc(t.roleAdmin),c.Hb(2),c.wc("routerLink",c.Bc(9,mt,t.id)),c.Hb(2),c.wc("routerLink",c.Bc(11,ft,t.id))}}const ht=function(){return{x:"800px"}};function pt(t,e){if(1&t){const t=c.cc();c.bc(0,"nz-table",15,16),c.qc(2,"filter"),c.bc(3,"thead"),c.bc(4,"tr"),c.bc(5,"th"),c.Rc(6," Pr\xe9nom "),c.ac(),c.bc(7,"th"),c.Rc(8,"Nom"),c.ac(),c.bc(9,"th"),c.Rc(10,"Email"),c.ac(),c.bc(11,"th"),c.Rc(12,"T\xe9l\xe9phone"),c.ac(),c.bc(13,"th"),c.Rc(14,"Fonction"),c.ac(),c.bc(15,"th"),c.Rc(16,"Statut"),c.ac(),c.bc(17,"th"),c.Rc(18,"R\xf4le"),c.ac(),c.bc(19,"th",17),c.Rc(20,"Actions"),c.ac(),c.ac(),c.ac(),c.bc(21,"tbody"),c.Pc(22,bt,22,13,"tr",18),c.ac(),c.bc(23,"tfoot"),c.bc(24,"tr"),c.bc(25,"td"),c.bc(26,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().firstname=e}))("keyup",(function(){return c.Gc(t),c.pc().searchFirstName()})),c.ac(),c.ac(),c.bc(27,"td"),c.bc(28,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().lasttname=e}))("keyup",(function(){return c.Gc(t),c.pc().searchLasttName()})),c.ac(),c.ac(),c.bc(29,"td"),c.bc(30,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().email=e}))("keyup",(function(){return c.Gc(t),c.pc().searchEmail()})),c.ac(),c.ac(),c.bc(31,"td"),c.bc(32,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().tele=e}))("keyup",(function(){return c.Gc(t),c.pc().searchTele()})),c.ac(),c.ac(),c.bc(33,"td"),c.bc(34,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().fonction=e}))("keyup",(function(){return c.Gc(t),c.pc().searchFonction()})),c.ac(),c.ac(),c.bc(35,"td"),c.bc(36,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().role=e}))("keyup",(function(){return c.Gc(t),c.pc().searchRole()})),c.ac(),c.ac(),c.bc(37,"td"),c.bc(38,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().roleAdmin=e}))("keyup",(function(){return c.Gc(t),c.pc().searchRoleAdmin()})),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.Fc(1),e=c.pc();c.wc("nzData",c.sc(2,12,e.listOfDisplayData,e.term))("nzScroll",c.Ac(15,ht))("nzPageSize",10)("nzNoResult","Pas de r\xe9sultat"),c.Hb(22),c.wc("ngForOf",t.data),c.Hb(4),c.wc("ngModel",e.firstname),c.Hb(2),c.wc("ngModel",e.lasttname),c.Hb(2),c.wc("ngModel",e.email),c.Hb(2),c.wc("ngModel",e.tele),c.Hb(2),c.wc("ngModel",e.fonction),c.Hb(2),c.wc("ngModel",e.role),c.Hb(2),c.wc("ngModel",e.roleAdmin)}}let vt=(()=>{class t{constructor(t,e,i,r,c,o){this.utilisateurService=t,this.sessionService=e,this.planningService=i,this.planningXEamenService=r,this.sessionExamenService=c,this.toastr=o,this.term="",this.firstname="",this.lasttname="",this.email="",this.tele="",this.fonction="",this.role="",this.roleAdmin="",this.verifDataReady=!0,this.tableReady=!1}ngOnInit(){this.fetchUtilisateurs()}deleteUtilisateur(t){a.a.fire({title:"\xcates vous s\xfbr de vouloir supprimer cet utilisateur ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(e=>{e.isConfirmed&&this.utilisateurService.deleteUtilisateurInstructeur(t).subscribe(t=>{t.success?(this.toastr.success("Succ\xe8s"),this.fetchUtilisateurs()):this.toastr.error("Erreur",t.error)})})}fetchUtilisateurs(){this.utilisateurService.getAllFormateurExterne().subscribe(t=>{this.listOfData=t.results,this.tableReady=!0,this.verifDataReady=!1,this.listOfDisplayData=[...this.listOfData]})}DeleteUtilisateur(t){this.planningService.deletePlanning(t).subscribe(e=>{e.success?this.sessionService.deleteFormateurSession(t).subscribe(t=>{t.success||this.toastr.error("Erreur",t.error)}):this.toastr.error("Erreur",e.error)})}DeleteUtilisateurExamen(t){this.planningXEamenService.deletePlanning(t).subscribe(e=>{e.success?this.sessionExamenService.deleteFormateurSession(t).subscribe(t=>{t.success||this.toastr.error("Erreur",t.error)}):this.toastr.error("Erreur",e.error)})}searchFirstName(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchLasttName(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchEmail(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchTele(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchFonction(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchRole(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchRoleAdmin(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(d.a),c.Vb(ot.a),c.Vb(nt.a),c.Vb(st.a),c.Vb(at.a),c.Vb(u.b))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-utilisateur-externe"]],decls:20,vars:4,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"container"],[1,"text-right"],["routerLink","/admin/utilisateurs/add-utilisateurs-externe",1,"btn","btn-info","mt-5","mb-4"],[1,"fas","fa-plus"],[1,"mb-5","text-dark"],[1,"col-sm-3"],[1,"form-inline","mb-2"],["type","text","name","term","placeholder","Recherche",1,"form-control",3,"ngModel","ngModelChange"],["nzTableLayout","fixed",3,"nzData","nzScroll","nzPageSize","nzNoResult",4,"ngIf"],[3,"nzActive","nzLoading"],["nzTableLayout","fixed",3,"nzData","nzScroll","nzPageSize","nzNoResult"],["nzTable",""],["nzWidth","20%"],[4,"ngFor","ngForOf"],["nz-input","","placeholder","Recherche","nzSize","default",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup"],[1,"btn","btn-primary","mr-2","btn-sm",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"btn","btn-warning","text-white","mr-2","btn-sm",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",4),c.bc(5,"div",5),c.bc(6,"div",6),c.bc(7,"button",7),c.Wb(8,"i",8),c.Rc(9," Ajouter un utilisateur "),c.ac(),c.ac(),c.bc(10,"h4",9),c.Rc(11,"Utilisateurs Externes"),c.ac(),c.bc(12,"div"),c.bc(13,"div",3),c.bc(14,"div",10),c.bc(15,"div",11),c.bc(16,"input",12),c.mc("ngModelChange",(function(t){return e.term=t})),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(17,"div"),c.Pc(18,pt,39,16,"nz-table",13),c.Wb(19,"nz-skeleton",14),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Hb(16),c.wc("ngModel",e.term),c.Hb(2),c.wc("ngIf",e.tableReady),c.Hb(1),c.wc("nzActive",!0)("nzLoading",e.verifDataReady))},directives:[l.d,n.d,n.m,n.p,r.n,lt.a,ut.c,ut.g,ut.h,ut.b,ut.f,ut.e,r.m],pipes:[dt.a],styles:["tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.7rem}@media(max-width:768px){tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.input-hidden[_ngcontent-%COMP%]{display:none}}"]}),t})();function gt(t,e){1&t&&(c.bc(0,"button",19),c.Wb(1,"i",20),c.Rc(2," Retour "),c.ac())}function Ct(t,e){1&t&&(c.bc(0,"button",21),c.Wb(1,"i",20),c.Rc(2," Retour "),c.ac())}function wt(t,e){1&t&&(c.bc(0,"p",14),c.bc(1,"b"),c.Rc(2,"Certification: "),c.ac(),c.ac())}function Lt(t,e){if(1&t&&(c.bc(0,"span",24),c.Rc(1),c.ac()),2&t){const t=c.pc().$implicit;c.Hb(1),c.Tc(" Ajout\xe9e par ",t.nom_ajouter,"")}}function Rt(t,e){if(1&t){const t=c.cc();c.bc(0,"p",13),c.Rc(1),c.bc(2,"span"),c.bc(3,"i",22),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc().downloadCertif(i.nom_certif,i.email)})),c.ac(),c.ac(),c.Pc(4,Lt,2,1,"span",23),c.ac()}if(2&t){const t=e.$implicit;c.Hb(1),c.Tc(" ",null==t?null:t.nom_certif," "),c.Hb(3),c.wc("ngIf",t.id_ajouter)}}function xt(t,e){1&t&&(c.bc(0,"p",14),c.bc(1,"b"),c.Rc(2,"CV: "),c.ac(),c.ac())}function Ft(t,e){if(1&t&&(c.bc(0,"span",24),c.Rc(1),c.ac()),2&t){const t=c.pc().$implicit;c.Hb(1),c.Tc(" Ajout\xe9e par ",t.nom_ajouter,"")}}function yt(t,e){if(1&t){const t=c.cc();c.bc(0,"p",13),c.Rc(1),c.bc(2,"span"),c.bc(3,"i",22),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc().downloadCv(i.nom_cv,i.email)})),c.ac(),c.ac(),c.Pc(4,Ft,2,1,"span",23),c.ac()}if(2&t){const t=e.$implicit;c.Hb(1),c.Tc(" ",null==t?null:t.nom_cv," "),c.Hb(3),c.wc("ngIf",t.id_ajouter)}}function Ot(t,e){if(1&t){const t=c.cc();c.bc(0,"div",25),c.bc(1,"div",26),c.bc(2,"a",27),c.mc("click",(function(){return c.Gc(t),c.pc().changePassword()})),c.Wb(3,"i",28),c.Rc(4," Changer mot de passe "),c.ac(),c.ac(),c.ac()}}let Ht=(()=>{class t{constructor(t,e,i){this.toastr=t,this.utilisateurService=e,this.route=i,this.allCertif=[],this.allUser=[]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.fetchFormateur(this.id),this.fetchAllUser()}changePassword(){a.a.fire({title:"\xcates vous s\xfbr de vouloir changer ce mot de passe ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(t=>{t.isConfirmed&&this.utilisateurService.changePassword(this.Result.id,this.Result.email).subscribe(t=>{t.success?this.toastr.success("Succ\xe8s"):this.toastr.error("Erreur",t.error)})})}fetchFormateur(t){this.utilisateurService.getUtilisateurById(t).subscribe(t=>{this.Result=t.result[0]})}fetchAllUser(){this.utilisateurService.getAllUser().subscribe(t=>{this.allUser=t.results,this.fetchCertifFormateur(this.id),this.fetchCvFormateur(this.id)})}fetchCertifFormateur(t){this.utilisateurService.getAllFormateurCertifById(t).subscribe(t=>{this.allCertif=t.result,this.allCertif&&(this.filtreAllCertif=this.allCertif.filter(t=>(this.ajouteur=[],null==t.id_ajouter||(this.ajouteur=this.allUser.filter(e=>e.id===t.id_ajouter),t.nom_ajouter=this.ajouteur[0].nom+" "+this.ajouteur[0].prenom),t)))})}fetchCvFormateur(t){this.utilisateurService.getAllFormateurCvById(t).subscribe(t=>{this.allCv=t.result,this.allCv&&(this.filtreAllCertif=this.allCv.filter(t=>(this.ajouteurCV=[],null==t.id_ajouter||(this.ajouteurCV=this.allUser.filter(e=>e.id===t.id_ajouter),t.nom_ajouter=this.ajouteurCV[0].nom+" "+this.ajouteurCV[0].prenom),t)))})}downloadCertif(t,e){a.a.fire({title:"\xcates vous s\xfbr de vouloir t\xe9l\xe9charger cette certification ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(i=>{i.isConfirmed&&this.utilisateurService.downloadCertifById(t,e).subscribe(e=>{const i=new Blob([e],{type:e.type}),r=window.URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download=t,c.click()})})}downloadCv(t,e){a.a.fire({title:"\xcates vous s\xfbr de vouloir t\xe9l\xe9charger ce CV ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(i=>{i.isConfirmed&&this.utilisateurService.downloadCvById(t,e).subscribe(e=>{const i=new Blob([e],{type:e.type}),r=window.URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download=t,c.click()})})}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(u.b),c.Vb(d.a),c.Vb(l.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-show-utilisateur-actif"]],decls:30,vars:12,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],[1,"text-right","mt-5",2,"padding-top","50px !important"],["routerLink","/admin/utilisateurs/list-utilisateurs-actif","class","btn btn-success mr-2",4,"ngIf"],["routerLink","/admin/utilisateurs/list-utilisateurs-externe","class","btn btn-success mr-2",4,"ngIf"],[1,"row","mb-2","mt-4"],[1,"col-12","col-sm-6","col-md-12","col-lg-12"],[1,"card","bg-light"],[1,"card-header","lead","text-muted","border-bottom-0"],[1,"card-body","pt-0"],[1,"row"],[1,"col-7"],[1,"lead"],[1,"text-muted","lead","text-sm"],["class","text-muted lead text-sm",4,"ngIf"],["class"," lead",4,"ngFor","ngForOf"],["class","lead",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],["routerLink","/admin/utilisateurs/list-utilisateurs-actif",1,"btn","btn-success","mr-2"],[1,"fas","fa-arrow-alt-circle-left"],["routerLink","/admin/utilisateurs/list-utilisateurs-externe",1,"btn","btn-success","mr-2"],[1,"fas","fa-download","text-success","ml-4",2,"cursor","pointer",3,"click"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[1,"card-footer"],[1,"text-right"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-sync-alt"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.bc(3,"div",3),c.Pc(4,gt,3,0,"button",4),c.Pc(5,Ct,3,0,"button",5),c.ac(),c.bc(6,"div",6),c.bc(7,"div",7),c.bc(8,"div",8),c.bc(9,"div",9),c.Rc(10),c.ac(),c.bc(11,"div",10),c.bc(12,"div",11),c.bc(13,"div",12),c.bc(14,"h2",13),c.bc(15,"b"),c.Rc(16),c.ac(),c.ac(),c.bc(17,"p",14),c.bc(18,"b"),c.Rc(19,"\xc9mail: "),c.ac(),c.Rc(20),c.ac(),c.bc(21,"p",14),c.bc(22,"b"),c.Rc(23,"T\xe9l\xe9phone: "),c.ac(),c.Rc(24),c.ac(),c.Pc(25,wt,3,0,"p",15),c.Pc(26,Rt,5,2,"p",16),c.Pc(27,xt,3,0,"p",15),c.Pc(28,yt,5,2,"p",17),c.ac(),c.ac(),c.ac(),c.Pc(29,Ot,5,0,"div",18),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Hb(4),c.wc("ngIf","interne"===(null==e.Result?null:e.Result.statutUtilisateur)),c.Hb(1),c.wc("ngIf","externe"===(null==e.Result?null:e.Result.statutUtilisateur)),c.Hb(5),c.Tc(" ",null==e.Result?null:e.Result.fonction," "),c.Hb(6),c.Uc("",null==e.Result?null:e.Result.prenom," ",null==e.Result?null:e.Result.nom,""),c.Hb(4),c.Tc(" ",null==e.Result?null:e.Result.email," "),c.Hb(4),c.Tc(" ",null==e.Result?null:e.Result.tele," "),c.Hb(1),c.wc("ngIf",e.allCertif),c.Hb(1),c.wc("ngForOf",e.allCertif),c.Hb(1),c.wc("ngIf",e.allCv),c.Hb(1),c.wc("ngForOf",e.allCv),c.Hb(1),c.wc("ngIf","active"===(null==e.Result?null:e.Result.statut)))},directives:[r.n,r.m,l.d],styles:[".lead[_ngcontent-%COMP%]{font-size:.9rem;font-weight:300}@media(max-width:768px){.lead[_ngcontent-%COMP%]{font-size:.8rem}}"]}),t})();function St(t,e){if(1&t){const t=c.cc();c.bc(0,"div",39),c.bc(1,"button",40),c.mc("click",(function(){return(0,e.dismiss)("Cross click")})),c.bc(2,"span",41),c.Rc(3,"\xd7"),c.ac(),c.ac(),c.ac(),c.bc(4,"div",42),c.bc(5,"form",43),c.mc("ngSubmit",(function(){return c.Gc(t),c.pc().onSubmitcertif()})),c.bc(6,"div",44),c.bc(7,"p",45),c.bc(8,"b"),c.Rc(9,"Certification: "),c.ac(),c.ac(),c.bc(10,"input",46,47),c.mc("change",(function(){c.Gc(t);const e=c.Fc(11);return c.pc().selectCertif(e.files)})),c.ac(),c.ac(),c.bc(12,"div",48),c.bc(13,"button",49),c.Rc(14,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.pc();c.Hb(13),c.wc("nzLoading",t.isLoadingCertification)}}function Pt(t,e){if(1&t){const t=c.cc();c.bc(0,"div",39),c.bc(1,"button",40),c.mc("click",(function(){return(0,e.dismiss)("Cross click")})),c.bc(2,"span",41),c.Rc(3,"\xd7"),c.ac(),c.ac(),c.ac(),c.bc(4,"div",42),c.bc(5,"form",43),c.mc("ngSubmit",(function(){return c.Gc(t),c.pc().onSubmitcv()})),c.bc(6,"div",44),c.bc(7,"p",45),c.bc(8,"b"),c.Rc(9,"Cv: "),c.ac(),c.ac(),c.bc(10,"input",50,51),c.mc("change",(function(){c.Gc(t);const e=c.Fc(11);return c.pc().selectcv(e.files)})),c.ac(),c.ac(),c.bc(12,"div",48),c.bc(13,"button",49),c.Rc(14,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.pc();c.Hb(13),c.wc("nzLoading",t.isLoadingCv)}}function It(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est obligatoire"),c.ac())}function zt(t,e){if(1&t&&(c.bc(0,"div",52),c.Pc(1,It,2,0,"div",35),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.nom.errors.required)}}function At(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est obligatoire"),c.ac())}function kt(t,e){if(1&t&&(c.bc(0,"div",52),c.Pc(1,At,2,0,"div",35),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.prenom.errors.required)}}function Et(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est obligatoire"),c.ac())}function Dt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide"),c.ac())}function Bt(t,e){if(1&t&&(c.bc(0,"div",52),c.Pc(1,Et,2,0,"div",35),c.Pc(2,Dt,2,0,"div",35),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.email.errors.required),c.Hb(1),c.wc("ngIf",t.f.email.errors.email)}}function Vt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"T\xe9l\xe9phone est obligatoire"),c.ac())}function Mt(t,e){if(1&t&&(c.bc(0,"div",52),c.Pc(1,Vt,2,0,"div",35),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.tele.errors.required)}}function Nt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est obligatoire"),c.ac())}function Gt(t,e){if(1&t&&(c.bc(0,"div",52),c.Pc(1,Nt,2,0,"div",35),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.fonction.errors.required)}}function Wt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"role is required"),c.ac())}function Ut(t,e){if(1&t&&(c.bc(0,"div",52),c.Pc(1,Wt,2,0,"div",35),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.roleAdmin.errors.required)}}function Tt(t,e){if(1&t){const t=c.cc();c.bc(0,"div",62),c.bc(1,"p"),c.Rc(2),c.ac(),c.bc(3,"button",63),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc(2).deleteCertif(i.nom_certif,i.email)})),c.Wb(4,"i",64),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Hb(2),c.Tc(" ",null==t?null:t.nom_certif," ")}}function qt(t,e){if(1&t){const t=c.cc();c.bc(0,"div",62),c.bc(1,"p"),c.Rc(2),c.ac(),c.bc(3,"button",63),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc(2).deletedCv(i.nom_cv,i.email)})),c.Wb(4,"i",65),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Hb(2),c.Tc(" ",null==t?null:t.nom_cv," ")}}function _t(t,e){if(1&t){const t=c.cc();c.bc(0,"div"),c.bc(1,"div",53),c.bc(2,"label",54),c.Wb(3,"input",55),c.Rc(4," Examinateur "),c.ac(),c.ac(),c.bc(5,"div",56),c.bc(6,"p",57),c.bc(7,"b"),c.Rc(8,"Certification: "),c.ac(),c.ac(),c.bc(9,"button",58),c.mc("click",(function(){c.Gc(t);const e=c.pc(),i=c.Fc(4);return e.open(i)})),c.Wb(10,"i",59),c.ac(),c.ac(),c.Pc(11,Tt,5,1,"div",60),c.bc(12,"div",61),c.bc(13,"p",57),c.bc(14,"b"),c.Rc(15,"CV: "),c.ac(),c.ac(),c.bc(16,"button",58),c.mc("click",(function(){c.Gc(t);const e=c.pc(),i=c.Fc(6);return e.openCV(i)})),c.Wb(17,"i",59),c.ac(),c.ac(),c.Pc(18,qt,5,1,"div",60),c.ac()}if(2&t){const t=c.pc();c.Hb(11),c.wc("ngForOf",t.allCertif),c.Hb(7),c.wc("ngForOf",t.allCv)}}const jt=function(t){return{"is-invalid":t}};let $t=(()=>{class t{constructor(t,e,i,r,c,o,n,s){this.formBuilder=t,this.router=e,this.toastr=i,this.utilisateurService=r,this.modalService=o,this.route=n,this.authService=s,this.submitted=!1,this.file=[],this.cv=[],this.isLoading=!1,this.isLoadingCertification=!1,this.isLoadingCv=!1,c.backdrop="static",c.keyboard=!1}open(t){this.modalService.open(t)}openCV(t){this.modalService.open(t)}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.authService.getcurrentuser().subscribe(t=>{this.idAdmin=t.id}),this.fetchCertifFormateur(this.id),this.fetchCvFormateur(this.id),this.utilisateurService.getUtilisateurById(this.id).subscribe(t=>{this.Result=t.result[0],this.Result.showDiv="Instructeur"===this.Result.role,this.editFormateurForm.patchValue({nom:this.Result.nom,prenom:this.Result.prenom,email:this.Result.email,tele:this.Result.tele,fonction:this.Result.fonction,roleAdmin:this.Result.roleAdmin,role:this.Result.role}),"oui"===this.Result.examinateur&&this.editFormateurForm.patchValue({examinateur:this.Result.examinateur})}),this.editFormateurForm=this.formBuilder.group({nom:["",[n.u.required]],prenom:["",[n.u.required]],email:["",[n.u.required,n.u.email]],tele:["",[n.u.required]],examinateur:[""],fonction:["",[n.u.required]],roleAdmin:["",[n.u.required]],role:["",[n.u.required]]})}get f(){return this.editFormateurForm.controls}onSubmit(){if(this.submitted=!0,this.editFormateurForm.invalid)return;let t;switch(this.isLoading=!0,this.editFormateurForm.value.examinateur){case!0:case"oui":t="oui";break;default:t="non"}this.utilisateurService.editUtilisateur(this.id,{nom:this.editFormateurForm.value.nom,prenom:this.editFormateurForm.value.prenom,email:this.editFormateurForm.value.email,tele:this.editFormateurForm.value.tele,fonction:this.editFormateurForm.value.fonction,role:this.editFormateurForm.value.role,roleAdmin:this.editFormateurForm.value.roleAdmin,examinateur:t}).subscribe(t=>{t.success?(this.toastr.success("Succ\xe8s"),this.router.navigate(["/admin/utilisateurs/list-utilisateurs-actif"])):(this.toastr.error("Erreur",t.error),this.isLoading=!1)})}fetchCertifFormateur(t){this.utilisateurService.getAllFormateurCertifById(t).subscribe(t=>{this.allCertif=t.result})}fetchCvFormateur(t){this.utilisateurService.getAllFormateurCvById(t).subscribe(t=>{this.allCv=t.result})}deleteCertif(t,e){a.a.fire({title:"\xcates vous s\xfbr de vouloir supprimer cette certification ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(i=>{i.isConfirmed&&this.utilisateurService.deleteCertifById(t,e).subscribe(t=>{t.success?(this.fetchCertifFormateur(this.id),this.toastr.success("Succ\xe8s")):this.toastr.error("Erreur",t)})})}deletedCv(t,e){a.a.fire({title:"\xcates vous s\xfbr de vouloir supprimer ce cv ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(i=>{i.isConfirmed&&this.utilisateurService.deleteCvById(t,e).subscribe(t=>{t.success?(this.fetchCvFormateur(this.id),this.toastr.success("Succ\xe8s")):this.toastr.error("Erreur",t)})})}onSubmitcertif(){return Object(B.b)(this,void 0,void 0,(function*(){if(this.file.length>0){this.isLoadingCertification=!0,this.modalService.dismissAll();const t=this.Result.email;let e=1;yield this.file.forEach((i,r,c)=>{const o=new FormData;o.append("file",i),this.utilisateurService.saveCertifUtilisateur(t,this.idAdmin,o).subscribe(t=>{t.success?1===e&&(this.toastr.success("Succ\xe8s"),e=2):(this.toastr.error("Erreur",t.error),this.isLoadingCertification=!1),r===c.length-1&&this.fetchCertifFormateur(this.id)})})}this.file=[]}))}onSubmitcv(){if(this.cv.length>0){this.isLoadingCv=!0,this.modalService.dismissAll();const t=this.Result.email;let e=1;this.cv.forEach((i,r,c)=>{const o=new FormData;o.append("file",i),this.utilisateurService.saveCvUtilisateur(t,this.idAdmin,o).subscribe(t=>{t.success?1===e&&(this.toastr.success("Succ\xe8s"),e=2):(this.toastr.error("Erreur",t.error),this.isLoadingCv=!1),r===c.length-1&&this.fetchCvFormateur(this.id)})})}this.cv=[]}selectCertif(t){if(this.file=[],t){const e=t;for(let t=0;t<e.length;t++)this.file.push(e[t])}}selectcv(t){if(this.cv=[],t){const e=t;for(let t=0;t<e.length;t++)this.cv.push(e[t])}}changeStatut(t){t&&this.editFormateurForm.value.role&&(this.Result.showDiv="Utilisateur"!==this.editFormateurForm.value.role)}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(n.e),c.Vb(l.c),c.Vb(u.b),c.Vb(d.a),c.Vb(m.c),c.Vb(m.b),c.Vb(l.a),c.Vb(f.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-edit-utilisateur-actif"]],decls:66,vars:27,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],["content",""],["contentCV",""],[1,"text-right","mt-5",2,"padding-top","50px !important"],["routerLink","/admin/utilisateurs/list-utilisateurs-actif",1,"btn","btn-success","mr-2"],[1,"fas","fa-arrow-alt-circle-left"],[1,"row","mb-2"],[1,"col-sm-12","text-center","mb-4"],[1,"edit-title"],[1,"col-12","col-md-6","mx-auto"],[3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["type","text","formControlName","nom","placeholder","Pr\xe9nom",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","prenom","placeholder","Nom",1,"form-control",3,"ngClass"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","formControlName","email","placeholder","Email",1,"form-control",3,"ngClass"],[1,"fas","fa-phone"],["type","number","formControlName","tele","placeholder","T\xe9l\xe9phone",1,"form-control",3,"ngClass"],["type","text","formControlName","fonction","placeholder","Fonction",1,"form-control",3,"ngClass"],["formControlName","role",3,"ngModelChange"],["nz-radio","","nzValue","Utilisateur"],["nz-radio","","nzValue","Instructeur"],[1,"input-group","mt-3","mb-3"],["formControlName","roleAdmin","name","","id","",1,"form-control",3,"ngClass"],["value","","disabled","","selected","","hidden",""],["value","Pas de r\xf4le"],["value","Administrateur global"],["value","Administrateur des donn\xe9es d'information"],["value","Administrateur d'utilisateurs"],["value","Administrateur des sessions de formations/examens"],["value","Administrateur d'allocation"],[4,"ngIf"],[1,"row"],[1,"col-12","my-4","text-center"],["type","submit","nz-button","","nzType","primary","nzBlock","",3,"nzLoading"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"text-sm"],["type","file","name","file","multiple","multiple",3,"change"],["file",""],[1,"modal-footer"],["type","submit","nz-button","","nzType","primary",3,"nzLoading"],["type","file","name","cv","multiple","multiple",3,"change"],["cv",""],[1,"invalid-feedback"],[1,"mb-3","form-check"],[1,"form-check-label"],["type","checkbox","name","","formControlName","examinateur",1,"form-check-input"],[1,"d-flex","justify-content-between"],[1,"text-muted","text-sm"],["type","button",1,"btn","btn-info","btn-sm","ml-2",3,"click"],[1,"fas","fa-plus"],["class"," mt-3 d-flex justify-content-between",4,"ngFor","ngForOf"],[1,"my-2","d-flex","justify-content-between"],[1,"mt-3","d-flex","justify-content-between"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[1,"fas","fa-trash-alt",2,"cursor","pointer"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.Pc(3,St,15,1,"ng-template",null,3,c.Qc),c.Pc(5,Pt,15,1,"ng-template",null,4,c.Qc),c.bc(7,"div",5),c.bc(8,"button",6),c.Wb(9,"i",7),c.Rc(10," Retour "),c.ac(),c.ac(),c.bc(11,"div",8),c.bc(12,"div",9),c.bc(13,"h1",10),c.Rc(14," Modifier un utilisateur"),c.ac(),c.ac(),c.bc(15,"div",11),c.bc(16,"form",12),c.mc("ngSubmit",(function(){return e.onSubmit()})),c.bc(17,"div",13),c.Wb(18,"input",14),c.Pc(19,zt,2,1,"div",15),c.ac(),c.bc(20,"div",13),c.Wb(21,"input",16),c.Pc(22,kt,2,1,"div",15),c.ac(),c.bc(23,"div",13),c.bc(24,"div",17),c.bc(25,"div",18),c.bc(26,"span"),c.Rc(27,"@"),c.ac(),c.ac(),c.ac(),c.Wb(28,"input",19),c.Pc(29,Bt,3,2,"div",15),c.ac(),c.bc(30,"div",13),c.bc(31,"div",17),c.bc(32,"div",18),c.Wb(33,"span",20),c.ac(),c.ac(),c.Wb(34,"input",21),c.Pc(35,Mt,2,1,"div",15),c.ac(),c.bc(36,"div",13),c.Wb(37,"input",22),c.Pc(38,Gt,2,1,"div",15),c.ac(),c.bc(39,"nz-radio-group",23),c.mc("ngModelChange",(function(t){return e.changeStatut(t)})),c.bc(40,"label",24),c.Rc(41,"Utilisateur"),c.ac(),c.bc(42,"label",25),c.Rc(43,"Instructeur"),c.ac(),c.ac(),c.bc(44,"div",26),c.bc(45,"select",27),c.bc(46,"option",28),c.Rc(47,"Choisir un role"),c.ac(),c.bc(48,"option",29),c.Rc(49,"Pas de r\xf4le"),c.ac(),c.bc(50,"option",30),c.Rc(51,"Administrateur global "),c.ac(),c.bc(52,"option",31),c.Rc(53,"Administrateur des donn\xe9es d'information"),c.ac(),c.bc(54,"option",32),c.Rc(55,"Administrateur d'utilisateurs"),c.ac(),c.bc(56,"option",33),c.Rc(57,"Administrateur des sessions de formations/examens"),c.ac(),c.bc(58,"option",34),c.Rc(59,"Administrateur d'allocation"),c.ac(),c.ac(),c.Pc(60,Ut,2,1,"div",15),c.ac(),c.Pc(61,_t,19,2,"div",35),c.bc(62,"div",36),c.bc(63,"div",37),c.bc(64,"button",38),c.Rc(65,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Hb(16),c.wc("formGroup",e.editFormateurForm),c.Hb(2),c.wc("ngClass",c.Bc(15,jt,e.submitted&&e.f.nom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.nom.errors),c.Hb(2),c.wc("ngClass",c.Bc(17,jt,e.submitted&&e.f.prenom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.prenom.errors),c.Hb(6),c.wc("ngClass",c.Bc(19,jt,e.submitted&&e.f.email.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.email.errors),c.Hb(5),c.wc("ngClass",c.Bc(21,jt,e.submitted&&e.f.tele.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.tele.errors),c.Hb(2),c.wc("ngClass",c.Bc(23,jt,e.submitted&&e.f.fonction.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.fonction.errors),c.Hb(7),c.wc("ngClass",c.Bc(25,jt,e.submitted&&e.f.roleAdmin.errors)),c.Hb(15),c.wc("ngIf",e.submitted&&e.f.roleAdmin.errors),c.Hb(1),c.wc("ngIf",null==e.Result?null:e.Result.showDiv),c.Hb(3),c.wc("nzLoading",e.isLoading))},directives:[l.d,n.w,n.n,n.h,n.d,n.m,n.g,r.l,r.n,n.r,b.b,b.a,n.t,n.q,n.v,h.a,p.a,v.a,n.o,n.c,r.m],styles:[""]}),t})();function Xt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est obligatoire"),c.ac())}function Qt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est invalide"),c.ac())}function Zt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Pr\xe9nom est invalide"),c.ac())}function Jt(t,e){if(1&t&&(c.bc(0,"div",37),c.Pc(1,Xt,2,0,"div",33),c.Pc(2,Qt,2,0,"div",33),c.Pc(3,Zt,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.nom.errors.required),c.Hb(1),c.wc("ngIf",t.f.nom.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.nom.errors.trimError2)}}function Kt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est obligatoire"),c.ac())}function Yt(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est invalide"),c.ac())}function te(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Nom est invalide"),c.ac())}function ee(t,e){if(1&t&&(c.bc(0,"div",37),c.Pc(1,Kt,2,0,"div",33),c.Pc(2,Yt,2,0,"div",33),c.Pc(3,te,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.prenom.errors.required),c.Hb(1),c.wc("ngIf",t.f.prenom.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.prenom.errors.trimError2)}}function ie(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est obligatoire"),c.ac())}function re(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide"),c.ac())}function ce(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide<"),c.ac())}function oe(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Email est invalide<"),c.ac())}function ne(t,e){if(1&t&&(c.bc(0,"div",37),c.Pc(1,ie,2,0,"div",33),c.Pc(2,re,2,0,"div",33),c.Pc(3,ce,2,0,"div",33),c.Pc(4,oe,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.email.errors.required),c.Hb(1),c.wc("ngIf",t.f.email.errors.email),c.Hb(1),c.wc("ngIf",t.f.email.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.email.errors.trimError2)}}function se(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"T\xe9l\xe9phone est obligatoire"),c.ac())}function ae(t,e){if(1&t&&(c.bc(0,"div",37),c.Pc(1,se,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.tele.errors.required)}}function le(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est obligatoire"),c.ac())}function ue(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est invalide"),c.ac())}function de(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"Fonction est invalide"),c.ac())}function me(t,e){if(1&t&&(c.bc(0,"div",37),c.Pc(1,le,2,0,"div",33),c.Pc(2,ue,2,0,"div",33),c.Pc(3,de,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.fonction.errors.required),c.Hb(1),c.wc("ngIf",t.f.fonction.errors.trimError),c.Hb(1),c.wc("ngIf",t.f.fonction.errors.trimError2)}}function fe(t,e){1&t&&(c.bc(0,"div"),c.Rc(1,"role is required"),c.ac())}function be(t,e){if(1&t&&(c.bc(0,"div",37),c.Pc(1,fe,2,0,"div",33),c.ac()),2&t){const t=c.pc();c.Hb(1),c.wc("ngIf",t.f.roleAdmin.errors.required)}}function he(t,e){if(1&t){const t=c.cc();c.bc(0,"div"),c.bc(1,"div",38),c.bc(2,"label",39),c.Wb(3,"input",40),c.Rc(4," Examinateur "),c.ac(),c.ac(),c.bc(5,"div",41),c.bc(6,"label",42),c.Rc(7,"Certification"),c.ac(),c.Wb(8,"br"),c.bc(9,"input",43,44),c.mc("change",(function(){c.Gc(t);const e=c.Fc(10);return c.pc().selectCertif(e.files)})),c.ac(),c.ac(),c.bc(11,"div",41),c.bc(12,"label"),c.Rc(13,"CV"),c.ac(),c.Wb(14,"br"),c.bc(15,"input",45,46),c.mc("change",(function(){c.Gc(t);const e=c.Fc(16);return c.pc().selectcv(e.files)})),c.ac(),c.ac(),c.ac()}}const pe=function(t){return{"is-invalid":t}};let ve=(()=>{class t{constructor(t,e,i,r,c){this.formBuilder=t,this.router=e,this.toastr=i,this.utilisateurService=r,this.authService=c,this.submitted=!1,this.file=[],this.cv=[],this.isLoading=!1,this.trimValidator=t=>t.value.startsWith(" ")?{trimError:{value:"control has leading whitespace"}}:t.value.endsWith(" ")?{trimError2:{value:"control has trailing whitespace"}}:null}ngOnInit(){this.statut="Utilisateur",this.authService.getcurrentuser().subscribe(t=>{this.id=t.id}),this.FormateurForm=this.formBuilder.group({nom:["",[n.u.required,this.trimValidator]],prenom:["",[n.u.required,this.trimValidator]],email:["",[n.u.required,n.u.email,this.trimValidator]],tele:["",[n.u.required]],roleAdmin:["Pas de r\xf4le",[n.u.required]],examinateur:[""],fonction:["",[n.u.required,this.trimValidator]],role:["Utilisateur",[n.u.required]]})}get f(){return this.FormateurForm.controls}onSubmit(){if(this.submitted=!0,this.FormateurForm.invalid)return;let t;switch(this.isLoading=!0,this.FormateurForm.value.examinateur){case!0:case"oui":t="oui";break;default:t="non"}const e={nom:this.FormateurForm.value.nom,prenom:this.FormateurForm.value.prenom,email:this.FormateurForm.value.email,tele:this.FormateurForm.value.tele,fonction:this.FormateurForm.value.fonction,roleAdmin:this.FormateurForm.value.roleAdmin,role:this.FormateurForm.value.role,examinateur:t,statutUtilisateur:"interne"};this.utilisateurService.saveUtilisateur(e).subscribe(t=>Object(B.b)(this,void 0,void 0,(function*(){t.success?(this.file&&(yield this.file.forEach(t=>{const i=new FormData;i.append("file",t),this.utilisateurService.saveCertifUtilisateur(e.email,this.id,i).subscribe(t=>{t.success||(this.toastr.error("Erreur",t.error),this.isLoading=!1)})})),this.cv&&this.cv.forEach(t=>{const i=new FormData;i.append("file",t),this.utilisateurService.saveCvUtilisateur(e.email,this.id,i).subscribe(t=>{t.success||(this.toastr.error("Erreur",t.error),this.isLoading=!1)})}),this.toastr.success("Succ\xe8s"),this.router.navigate(["/admin/utilisateurs/list-utilisateurs-actif"])):(this.toastr.error("Erreur",t.error),this.isLoading=!1)})))}selectCertif(t){if(t){const e=t;for(let t=0;t<e.length;t++)this.file.push(e[t])}}selectcv(t){if(t){const e=t;for(let t=0;t<e.length;t++)this.cv.push(e[t])}}changeStatut(t){t&&(this.statut=this.FormateurForm.value.role,"Utilisateur"===this.FormateurForm.value.role&&(this.FormateurForm.patchValue({examinateur:""}),this.file=[],this.cv=[]))}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(n.e),c.Vb(l.c),c.Vb(u.b),c.Vb(d.a),c.Vb(f.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-add-utilisateur-actif"]],decls:62,vars:27,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],[1,"text-right","mt-5",2,"padding-top","50px !important"],["routerLink","/admin/utilisateurs/list-utilisateurs-actif",1,"btn","btn-success","mr-2"],[1,"fas","fa-arrow-alt-circle-left"],[1,"row","mb-2"],[1,"col-sm-12","text-center","mb-4"],[1,"add-title"],[1,"col-12","col-md-6","mx-auto"],[3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["type","text","formControlName","nom","placeholder","Pr\xe9nom",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","prenom","placeholder","Nom",1,"form-control",3,"ngClass"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","formControlName","email","placeholder","Email",1,"form-control",3,"ngClass"],[1,"fas","fa-phone"],["type","number","formControlName","tele","placeholder","T\xe9l\xe9phone",1,"form-control",3,"ngClass"],["type","text","formControlName","fonction","placeholder","Fonction",1,"form-control",3,"ngClass"],["formControlName","role",3,"ngModelChange"],["nz-radio","","nzValue","Utilisateur"],["nz-radio","","nzValue","Instructeur"],[1,"input-group","mt-3","mb-3"],["formControlName","roleAdmin","name","","id","",1,"form-control",3,"ngClass"],["value","","disabled","","selected","","hidden",""],["value","Pas de r\xf4le"],["value","Administrateur global"],["value","Administrateur des donn\xe9es d'information"],["value","Administrateur d'utilisateurs"],["value","Administrateur des sessions de formations/examens"],["value","Administrateur d'allocation"],[4,"ngIf"],[1,"row"],[1,"col-12","mb-4","text-center"],["type","submit","nz-button","","nzType","primary","nzBlock","",3,"nzLoading"],[1,"invalid-feedback"],[1,"mb-3","form-check"],[1,"form-check-label"],["type","checkbox","name","","formControlName","examinateur",1,"form-check-input"],[1,"mb-3"],["for","exampleFormControlFile1"],["type","file","name","file","multiple","multiple",3,"change"],["file",""],["type","file","name","cv","multiple","multiple",3,"change"],["cv",""]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"button",4),c.Wb(5,"i",5),c.Rc(6," Retour "),c.ac(),c.ac(),c.bc(7,"div",6),c.bc(8,"div",7),c.bc(9,"h1",8),c.Rc(10,"Ajouter un utilisateur"),c.ac(),c.ac(),c.bc(11,"div",9),c.bc(12,"form",10),c.mc("ngSubmit",(function(){return e.onSubmit()})),c.bc(13,"div",11),c.Wb(14,"input",12),c.Pc(15,Jt,4,3,"div",13),c.ac(),c.bc(16,"div",11),c.Wb(17,"input",14),c.Pc(18,ee,4,3,"div",13),c.ac(),c.bc(19,"div",11),c.bc(20,"div",15),c.bc(21,"div",16),c.bc(22,"span"),c.Rc(23,"@"),c.ac(),c.ac(),c.ac(),c.Wb(24,"input",17),c.Pc(25,ne,5,4,"div",13),c.ac(),c.bc(26,"div",11),c.bc(27,"div",15),c.bc(28,"div",16),c.Wb(29,"span",18),c.ac(),c.ac(),c.Wb(30,"input",19),c.Pc(31,ae,2,1,"div",13),c.ac(),c.bc(32,"div",11),c.Wb(33,"input",20),c.Pc(34,me,4,3,"div",13),c.ac(),c.bc(35,"nz-radio-group",21),c.mc("ngModelChange",(function(t){return e.changeStatut(t)})),c.bc(36,"label",22),c.Rc(37,"Utilisateur"),c.ac(),c.bc(38,"label",23),c.Rc(39,"Instructeur"),c.ac(),c.ac(),c.bc(40,"div",24),c.bc(41,"select",25),c.bc(42,"option",26),c.Rc(43,"Choisir un role"),c.ac(),c.bc(44,"option",27),c.Rc(45,"Pas de r\xf4le"),c.ac(),c.bc(46,"option",28),c.Rc(47,"Administrateur global "),c.ac(),c.bc(48,"option",29),c.Rc(49,"Administrateur des donn\xe9es d'information"),c.ac(),c.bc(50,"option",30),c.Rc(51,"Administrateur d'utilisateurs"),c.ac(),c.bc(52,"option",31),c.Rc(53,"Administrateur des sessions de formations/examens"),c.ac(),c.bc(54,"option",32),c.Rc(55,"Administrateur d'allocation"),c.ac(),c.ac(),c.Pc(56,be,2,1,"div",13),c.ac(),c.Pc(57,he,17,0,"div",33),c.bc(58,"div",34),c.bc(59,"div",35),c.bc(60,"button",36),c.Rc(61,"Enregistrer"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Hb(12),c.wc("formGroup",e.FormateurForm),c.Hb(2),c.wc("ngClass",c.Bc(15,pe,e.submitted&&e.f.nom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.nom.errors),c.Hb(2),c.wc("ngClass",c.Bc(17,pe,e.submitted&&e.f.prenom.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.prenom.errors),c.Hb(6),c.wc("ngClass",c.Bc(19,pe,e.submitted&&e.f.email.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.email.errors),c.Hb(5),c.wc("ngClass",c.Bc(21,pe,e.submitted&&e.f.tele.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.tele.errors),c.Hb(2),c.wc("ngClass",c.Bc(23,pe,e.submitted&&e.f.fonction.errors)),c.Hb(1),c.wc("ngIf",e.submitted&&e.f.fonction.errors),c.Hb(7),c.wc("ngClass",c.Bc(25,pe,e.submitted&&e.f.roleAdmin.errors)),c.Hb(15),c.wc("ngIf",e.submitted&&e.f.roleAdmin.errors),c.Hb(1),c.wc("ngIf","Instructeur"===e.statut),c.Hb(3),c.wc("nzLoading",e.isLoading))},directives:[l.d,n.w,n.n,n.h,n.d,n.m,n.g,r.l,r.n,n.r,b.b,b.a,n.t,n.q,n.v,h.a,p.a,v.a,n.c],styles:[""]}),t})();const ge=function(t){return["/admin/utilisateurs/show-utilisateurs-actif",t]},Ce=function(t){return["/admin/utilisateurs/edit-utilisateurs-actif",t]};function we(t,e){if(1&t){const t=c.cc();c.bc(0,"tr"),c.bc(1,"td"),c.Rc(2),c.ac(),c.bc(3,"td"),c.Rc(4),c.ac(),c.bc(5,"td"),c.Rc(6),c.ac(),c.bc(7,"td"),c.Rc(8),c.ac(),c.bc(9,"td"),c.Rc(10),c.ac(),c.bc(11,"td"),c.Rc(12),c.ac(),c.bc(13,"td"),c.Rc(14),c.ac(),c.bc(15,"td"),c.bc(16,"button",20),c.Wb(17,"i",21),c.ac(),c.bc(18,"button",22),c.Wb(19,"i",23),c.ac(),c.bc(20,"button",24),c.mc("click",(function(){c.Gc(t);const i=e.$implicit;return c.pc(2).deleteUtilisateur(i.id)})),c.Wb(21,"i",25),c.ac(),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Hb(2),c.Sc(t.nom),c.Hb(2),c.Sc(t.prenom),c.Hb(2),c.Sc(t.email),c.Hb(2),c.Sc(t.tele),c.Hb(2),c.Sc(t.fonction),c.Hb(2),c.Sc(t.role),c.Hb(2),c.Sc(t.roleAdmin),c.Hb(2),c.wc("routerLink",c.Bc(9,ge,t.id)),c.Hb(2),c.wc("routerLink",c.Bc(11,Ce,t.id))}}const Le=function(){return{x:"800px"}};function Re(t,e){if(1&t){const t=c.cc();c.bc(0,"nz-table",15,16),c.qc(2,"filter"),c.bc(3,"thead"),c.bc(4,"tr"),c.bc(5,"th"),c.Rc(6," Pr\xe9nom "),c.ac(),c.bc(7,"th"),c.Rc(8,"Nom"),c.ac(),c.bc(9,"th"),c.Rc(10,"Email"),c.ac(),c.bc(11,"th"),c.Rc(12,"T\xe9l\xe9phone"),c.ac(),c.bc(13,"th"),c.Rc(14,"Fonction"),c.ac(),c.bc(15,"th"),c.Rc(16,"Statut"),c.ac(),c.bc(17,"th"),c.Rc(18,"R\xf4le"),c.ac(),c.bc(19,"th",17),c.Rc(20,"Actions"),c.ac(),c.ac(),c.ac(),c.bc(21,"tbody"),c.Pc(22,we,22,13,"tr",18),c.ac(),c.bc(23,"tfoot"),c.bc(24,"tr"),c.bc(25,"td"),c.bc(26,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().firstname=e}))("keyup",(function(){return c.Gc(t),c.pc().searchFirstName()})),c.ac(),c.ac(),c.bc(27,"td"),c.bc(28,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().lasttname=e}))("keyup",(function(){return c.Gc(t),c.pc().searchLasttName()})),c.ac(),c.ac(),c.bc(29,"td"),c.bc(30,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().email=e}))("keyup",(function(){return c.Gc(t),c.pc().searchEmail()})),c.ac(),c.ac(),c.bc(31,"td"),c.bc(32,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().tele=e}))("keyup",(function(){return c.Gc(t),c.pc().searchTele()})),c.ac(),c.ac(),c.bc(33,"td"),c.bc(34,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().fonction=e}))("keyup",(function(){return c.Gc(t),c.pc().searchFonction()})),c.ac(),c.ac(),c.bc(35,"td"),c.bc(36,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().role=e}))("keyup",(function(){return c.Gc(t),c.pc().searchRole()})),c.ac(),c.ac(),c.bc(37,"td"),c.bc(38,"input",19),c.mc("ngModelChange",(function(e){return c.Gc(t),c.pc().roleAdmin=e}))("keyup",(function(){return c.Gc(t),c.pc().searchRoleAdmin()})),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()}if(2&t){const t=c.Fc(1),e=c.pc();c.wc("nzData",c.sc(2,12,e.listOfDisplayData,e.term))("nzScroll",c.Ac(15,Le))("nzPageSize",10)("nzNoResult","Pas de r\xe9sultat"),c.Hb(22),c.wc("ngForOf",t.data),c.Hb(4),c.wc("ngModel",e.firstname),c.Hb(2),c.wc("ngModel",e.lasttname),c.Hb(2),c.wc("ngModel",e.email),c.Hb(2),c.wc("ngModel",e.tele),c.Hb(2),c.wc("ngModel",e.fonction),c.Hb(2),c.wc("ngModel",e.role),c.Hb(2),c.wc("ngModel",e.roleAdmin)}}let xe=(()=>{class t{constructor(t,e,i,r,c,o){this.utilisateurService=t,this.sessionService=e,this.planningService=i,this.planningXEamenService=r,this.sessionExamenService=c,this.toastr=o,this.term="",this.firstname="",this.lasttname="",this.email="",this.tele="",this.fonction="",this.role="",this.roleAdmin="",this.verifDataReady=!0,this.tableReady=!1}ngOnInit(){this.fetchUtilisateurs()}deleteUtilisateur(t){a.a.fire({title:"\xcates vous s\xfbr de vouloir supprimer cet utilisateur ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then(e=>{e.isConfirmed&&this.utilisateurService.deleteUtilisateurInstructeur(t).subscribe(t=>{t.success?(this.toastr.success("Succ\xe8s"),this.fetchUtilisateurs()):this.toastr.error("Erreur",t.error)})})}fetchUtilisateurs(){this.utilisateurService.getAllFormateurInterne().subscribe(t=>{this.listOfData=t.results,this.tableReady=!0,this.verifDataReady=!1,this.listOfDisplayData=[...this.listOfData]})}DeleteUtilisateur(t){this.planningService.deletePlanning(t).subscribe(e=>{e.success?this.sessionService.deleteFormateurSession(t).subscribe(t=>{t.success||this.toastr.error("Erreur",t.error)}):this.toastr.error("Erreur",e.error)})}DeleteUtilisateurExamen(t){this.planningXEamenService.deletePlanning(t).subscribe(e=>{e.success?this.sessionExamenService.deleteFormateurSession(t).subscribe(t=>{t.success||this.toastr.error("Erreur",t.error)}):this.toastr.error("Erreur",e.error)})}searchFirstName(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchLasttName(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchEmail(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchTele(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchFonction(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchRole(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}searchRoleAdmin(){this.listOfDisplayData=this.listOfData.filter(t=>-1!==t.nom.toLowerCase().indexOf(this.firstname.toLowerCase())&&-1!==t.prenom.toLowerCase().indexOf(this.lasttname.toLowerCase())&&-1!==t.email.toLowerCase().indexOf(this.email.toLowerCase())&&-1!==t.tele.toLowerCase().indexOf(this.tele.toLowerCase())&&-1!==t.fonction.toLowerCase().indexOf(this.fonction.toLowerCase())&&-1!==t.role.toLowerCase().indexOf(this.role.toLowerCase())&&-1!==t.roleAdmin.toLowerCase().indexOf(this.roleAdmin.toLowerCase()))}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(d.a),c.Vb(ot.a),c.Vb(nt.a),c.Vb(st.a),c.Vb(at.a),c.Vb(u.b))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-utilisateur-actif"]],decls:20,vars:4,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"container"],[1,"text-right"],["routerLink","/admin/utilisateurs/add-utilisateurs-actif",1,"btn","btn-info","mt-5","mb-4"],[1,"fas","fa-plus"],[1,"mb-5","text-dark"],[1,"col-sm-3"],[1,"form-inline","mb-2"],["type","text","name","term","placeholder","Recherche",1,"form-control",3,"ngModel","ngModelChange"],["nzTableLayout","fixed",3,"nzData","nzScroll","nzPageSize","nzNoResult",4,"ngIf"],[3,"nzActive","nzLoading"],["nzTableLayout","fixed",3,"nzData","nzScroll","nzPageSize","nzNoResult"],["nzTable",""],["nzWidth","20%"],[4,"ngFor","ngForOf"],["nz-input","","placeholder","Recherche","nzSize","default",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup"],[1,"btn","btn-primary","mr-2","btn-sm",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"btn","btn-warning","text-white","mr-2","btn-sm",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"section",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",4),c.bc(5,"div",5),c.bc(6,"div",6),c.bc(7,"button",7),c.Wb(8,"i",8),c.Rc(9," Ajouter un utilisateur "),c.ac(),c.ac(),c.bc(10,"h4",9),c.Rc(11,"Utilisateurs Internes"),c.ac(),c.bc(12,"div"),c.bc(13,"div",3),c.bc(14,"div",10),c.bc(15,"div",11),c.bc(16,"input",12),c.mc("ngModelChange",(function(t){return e.term=t})),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(17,"div"),c.Pc(18,Re,39,16,"nz-table",13),c.Wb(19,"nz-skeleton",14),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Hb(16),c.wc("ngModel",e.term),c.Hb(2),c.wc("ngIf",e.tableReady),c.Hb(1),c.wc("nzActive",!0)("nzLoading",e.verifDataReady))},directives:[l.d,n.d,n.m,n.p,r.n,lt.a,ut.c,ut.g,ut.h,ut.b,ut.f,ut.e,r.m],pipes:[dt.a],styles:["tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.7rem}@media(max-width:768px){tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.input-hidden[_ngcontent-%COMP%]{display:none}}"]}),t})();const Fe=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Pb({type:t,selectors:[["app-utilisateurs"]],decls:1,vars:0,template:function(t,e){1&t&&c.Wb(0,"router-outlet")},directives:[l.h],styles:[""]}),t})(),children:[{path:"list-utilisateurs-actif",component:xe},{path:"add-utilisateurs-actif",component:ve},{path:"edit-utilisateurs-actif/:id",component:$t},{path:"show-utilisateurs-actif/:id",component:Ht},{path:"list-utilisateurs-externe",component:vt},{path:"add-utilisateurs-externe",component:ct},{path:"edit-utilisateurs-externe/:id",component:D},{path:"show-utilisateurs-externe/:id",component:o}]}];let ye=(()=>{class t{}return t.\u0275mod=c.Tb({type:t}),t.\u0275inj=c.Sb({factory:function(e){return new(e||t)},imports:[[l.g.forChild(Fe)],l.g]}),t})();var Oe=i("Nqz0"),He=i("FwiY"),Se=i("oyxB");let Pe=(()=>{class t{}return t.\u0275mod=c.Tb({type:t}),t.\u0275inj=c.Sb({factory:function(e){return new(e||t)},imports:[[r.c,ye,n.s,n.i,dt.b,h.c,ut.d,Oe.b,He.b,lt.b,Se.e,b.c]]}),t})()}}]);